roundStatusBarHeight = 7rem

.fighters {
    position absolute // for z-index
    --fighter-visual-box-width  30rem
    --fighter-visual-box-height 30rem
    left 1rem
    right 1rem

    margin-top: roundStatusBarHeight
    top calc( var(--fighter-visual-box-height) )
    bottom 0.5rem

    overflow visible

    width auto
    height auto
}

.role {
    top auto
    bottom 0

    & {
        z-index: 5;
    }

    &.is-attacking {
        z-index: 6;
    }

    // -----------------------------

    .origin,
    .locator,
    .popups,
    .role-looks {
        position absolute
        top auto
        width 0
        height 0
        overflow visible
    }

    .origin {
        bottom 4.5rem

        // 以下是测试代码
        // background-color blue
        // width 20px
        // height 20px
    }

    .locator,
    .popups {
        bottom 0
    }

    .locator {
        transition-property: top right bottom left transform
        transition-timing-function: ease
        transition-duration: 0.15s

        // 以下是测试代码
        // background-color red
        // width 10px
        // height 10px
    }

    .popups {
        left calc( var(--fighter-visual-box-width) / -4 )

        // 以下是测试代码
        // background-color rgba(green, 0.4)
        // width  calc( var(--fighter-visual-box-width) / 2 )
        // height var(--fighter-visual-box-height)
    }

    .popups * {
        pointer-events none
    }

    .role-looks {
        width       var(--fighter-visual-box-width)
        height      var(--fighter-visual-box-height)
        left   calc(var(--fighter-visual-box-width) / -2 )
        right  auto
        bottom 0

        // 以下是测试代码
        // background-color rgba(red, 0.45)
    }

    .keyboard-tips {
        position absolute
        bottom 0
        width 13rem
        height 4.4rem
        display flex
        flex-wrap nowrap
        justify-content space-between

        opacity 1

        transition opaciy 0.3s ease-out
    }

    // -----------------------------

    &.has-lost {

        .role-looks {
            opacity 0.6
            filter grayscale(0.8)
        }

        .keyboard-tips {
            opacity 0.1
        }
    }

    &.has-won {

        .keyboard-tips {
            opacity 0.1
        }
    }

    .keyboard-tip-container {
        flex 0 0

        position relative
        min-width 3rem
        height: 100%
    }

    .keyboard-tip,
    .keyboard-tip-label {
        text-align center
        position absolute
        margin 0 auto
        left 0
        right 0
    }

    .keyboard-tip-label {
        top 0
        bottom auto

        font-size 0.8rem
        width auto
        height 1.5rem
        line-height 1.5rem
        border-radius 0.25rem

        color white
        background-color rgba(black, 0.87)
    }

    .keyboard-tip {
        top auto
        bottom 0

        font-size 1.3rem

        width  2rem
        height @width
        line-height @width

        border-radius 0.5rem
    }

    .auto-disappear-popup {
        position absolute
        animation fighter-auto-disappear-popup 1s ease-out both

        @keyframes fighter-auto-disappear-popup {
            0% {
                opacity 0
                transform none
            }

            30% {
                opacity 1
            }

            45%, 75% {
                transform translateY(-100%)
            }

            75% {
                opacity 1
            }

            100% {
                opacity 0
                transform translateY(-160%)
            }
        }

        &.health-point-decrease {

            .content {
                font-size 1.3rem
                padding 0.25em 1.5em
                line-height 1.25

                border-radius 0.5rem
                border 0.2rem double white

                color white
                background-color rgba(red, 0.79)
            }
        }
    }

    // -----------------------------

    &.player-1 {
        left 1rem
        right auto

        .keyboard-tips {
            left 0
            right auto
        }

        .origin {
            left calc( var(--fighter-visual-box-width) / 2 )
            right auto
        }
    }

    &.player-2 {
        right 1rem

        .keyboard-tips {
            left auto
            right 0
        }

        .origin {
            left auto
            right calc( var(--fighter-visual-box-width) / 2 )
        }
    }
}

